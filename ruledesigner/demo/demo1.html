<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Rules-Designer</title>

<link href="../css/theme/jquery-ui-1.10.4.custom.css" rel="stylesheet">
<script src="../js/lib/jquery-1.10.2.js"></script>
<script src="../js/lib/jquery-ui-1.10.4.js"></script>

<script src="../js/classes/helpers/Counter.js"></script>
<script src="../js/classes/helpers/Log.js"></script>

<script src="../js/classes/objects/Params.js"></script>
<script src="../js/classes/objects/RefParams.js"></script>
<script src="../js/classes/objects/VirtualDevice.js"></script>
<script src="../js/classes/objects/Actor.js"></script>
<script src="../js/classes/objects/Actors.js"></script>
<script src="../js/classes/objects/Actorgroup.js"></script>
<script src="../js/classes/objects/Actions.js"></script>
<script src="../js/classes/objects/Condition.js"></script>
<script src="../js/classes/objects/Gather.js"></script>
<script src="../js/classes/objects/Conditions.js"></script>
<script src="../js/classes/objects/Rule.js"></script>
</head>
<body>
<pre id="result">

</pre>
<script src="../js/classes/objects/Rules.js"></script>
<script>
		// Simulate global config
		var Configuration = {
			DEBUG_LEVEL : 4,
			ID_PREFIX : "RID"
		}
		
		// Simulate ID-Generator
		// If the representation of all objects on the home
		// automation server without an ID  an alternative
		// counter is use to generates ID
		var cSYS_ID = function() {

			var count = new Counter()

			return function() {
				return Configuration.ID_PREFIX + count();
			}

		}()
//
var rules = new Rules()

/*
 *
 */
var rule = new Rule('RULE_1_LIGHT_ON')
var rule_params = {
	'name': 'Fernsteuerung Einschaltregel',
	'descr' : 'Einschaltregel zu Fernsteuerung des Lichtes'
}

rule.getParamObj().setParameter(rule_params)
rule.getParamObj().addParam('link', 'Demo 1 - Regel 1')
rule.getParamObj().addParam('Kaptitel', 'X.3 Validierung und Anwendung')
rule.getParamObj().addParam('Beispiel', 1)

var cond = new Condition('Schalter (S)')
var ref_params = {
	'state': ['==', 'on']
}
cond.setRefParameter(ref_params)
rule.setConditionObj(cond)

var actor = new Actor('Lampe (L1)')
var actor_params = {
	'state' : 'on'
}
actor.setParameter(actor_params)
rule.getActions().addAction(actor)

rules.addRule(rule)

Log(rules.serialize())

Log(rules.getInfo())

/*
 *
 */
var rule = new Rule('RULE_1_LIGHT_OFF')
var rule_params = {
	'name': 'Fernsteuerung Ausschaltregel',
	'descr' : 'Ausschaltregel zu Fernsteuerung des Lichtes'
}

rule.getParamObj().setParameter(rule_params)
rule.getParamObj().addParam('link', 'Demo 1 -Regel 2')
rule.getParamObj().addParam('Kaptitel', 'X.3 Validierung und Anwendung')
rule.getParamObj().addParam('Beispiel', 1)
var cond = new Condition('Schalter (S)')
var ref_params = {
	'state': ['!=', 'on']
}
cond.setRefParameter(ref_params)
rule.setConditionObj(cond)

var actor = new Actor('Lampe (L1)')
var actor_params = {
	'state' : 'off'
}
actor.setParameter(actor_params)
rule.getActions().addAction(actor)

rules.addRule(rule)


Log(rules.serialize())

Log(rules.getInfo())

var result = rules.serialize();
$('#result').html(result); 
</script>
</body>
</html>
